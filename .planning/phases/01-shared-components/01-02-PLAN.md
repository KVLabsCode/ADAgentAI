---
phase: 01-shared-components
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/src/styles/linear-animations.css
  - frontend/src/components/atoms/fade-in.tsx
  - frontend/src/components/atoms/index.ts
  - frontend/src/app/globals.css
autonomous: true

must_haves:
  truths:
    - "Elements fade and slide into view when scrolling"
    - "Animations are smooth (60fps) and not jarring"
    - "Animation can be applied to any element via component or class"
  artifacts:
    - path: "frontend/src/styles/linear-animations.css"
      provides: "CSS keyframe animations and utility classes"
      contains: "@keyframes fade-in-up"
    - path: "frontend/src/components/atoms/fade-in.tsx"
      provides: "React component for scroll-triggered fade-in"
      exports: ["FadeIn"]
  key_links:
    - from: "frontend/src/components/atoms/fade-in.tsx"
      to: "IntersectionObserver API"
      via: "useEffect hook"
      pattern: "IntersectionObserver"
---

<objective>
Create scroll-triggered animation system using CSS and IntersectionObserver

Purpose: Enable smooth reveal animations as users scroll through marketing pages, matching Linear's polished scroll experience. Uses CSS animations + IntersectionObserver (no Framer Motion dependency needed).

Output: CSS animation file and FadeIn component for scroll-triggered reveals
</objective>

<execution_context>
@C:\Users\Chumm\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\Chumm\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@frontend/src/components/atoms/index.ts
@linear_pics/image.png
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create CSS animation keyframes and utilities</name>
  <files>frontend/src/styles/linear-animations.css</files>
  <action>
Create a CSS file with scroll animation keyframes and utility classes:

1. Keyframe definitions:
   ```css
   @keyframes fade-in {
     from { opacity: 0; }
     to { opacity: 1; }
   }

   @keyframes fade-in-up {
     from {
       opacity: 0;
       transform: translateY(20px);
     }
     to {
       opacity: 1;
       transform: translateY(0);
     }
   }

   @keyframes fade-in-down {
     from {
       opacity: 0;
       transform: translateY(-20px);
     }
     to {
       opacity: 1;
       transform: translateY(0);
     }
   }

   @keyframes scale-in {
     from {
       opacity: 0;
       transform: scale(0.95);
     }
     to {
       opacity: 1;
       transform: scale(1);
     }
   }
   ```

2. Animation utility classes (applied when element enters viewport):
   ```css
   .animate-fade-in {
     animation: fade-in 0.5s ease-out forwards;
   }

   .animate-fade-in-up {
     animation: fade-in-up 0.6s ease-out forwards;
   }

   .animate-fade-in-down {
     animation: fade-in-down 0.6s ease-out forwards;
   }

   .animate-scale-in {
     animation: scale-in 0.5s ease-out forwards;
   }
   ```

3. Pre-animation state class (applied before entering viewport):
   ```css
   .animate-on-scroll {
     opacity: 0;
   }

   .animate-on-scroll.animate-fade-in-up {
     transform: translateY(20px);
   }
   ```

4. Stagger delay utilities:
   ```css
   .delay-100 { animation-delay: 100ms; }
   .delay-200 { animation-delay: 200ms; }
   .delay-300 { animation-delay: 300ms; }
   .delay-400 { animation-delay: 400ms; }
   ```

5. Motion preference respect:
   ```css
   @media (prefers-reduced-motion: reduce) {
     .animate-fade-in,
     .animate-fade-in-up,
     .animate-fade-in-down,
     .animate-scale-in {
       animation: none;
       opacity: 1;
       transform: none;
     }
   }
   ```
  </action>
  <verify>File exists with keyframes and utility classes defined</verify>
  <done>CSS animations defined with fade, slide, scale variants and reduced-motion support</done>
</task>

<task type="auto">
  <name>Task 2: Create FadeIn React component</name>
  <files>frontend/src/components/atoms/fade-in.tsx</files>
  <action>
Create a React component that triggers animations on scroll using IntersectionObserver:

```tsx
"use client"

import { useEffect, useRef, useState, type ReactNode } from "react"
import { cn } from "@/lib/utils"

type AnimationType = "fade-in" | "fade-in-up" | "fade-in-down" | "scale-in"

interface FadeInProps {
  children: ReactNode
  className?: string
  animation?: AnimationType
  delay?: number
  threshold?: number
  once?: boolean
}

export function FadeIn({
  children,
  className,
  animation = "fade-in-up",
  delay = 0,
  threshold = 0.1,
  once = true,
}: FadeInProps) {
  const ref = useRef<HTMLDivElement>(null)
  const [isVisible, setIsVisible] = useState(false)

  useEffect(() => {
    const element = ref.current
    if (!element) return

    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          setIsVisible(true)
          if (once) {
            observer.unobserve(element)
          }
        } else if (!once) {
          setIsVisible(false)
        }
      },
      { threshold, rootMargin: "0px 0px -50px 0px" }
    )

    observer.observe(element)

    return () => observer.disconnect()
  }, [threshold, once])

  return (
    <div
      ref={ref}
      className={cn(
        "animate-on-scroll",
        isVisible && `animate-${animation}`,
        className
      )}
      style={{ animationDelay: delay ? `${delay}ms` : undefined }}
    >
      {children}
    </div>
  )
}
```

Key features:
- Uses IntersectionObserver for scroll detection (no external deps)
- Supports multiple animation types
- Configurable delay for staggered animations
- `once` prop controls whether animation replays
- Respects prefers-reduced-motion via CSS
- Negative rootMargin triggers slightly before element fully enters viewport
  </action>
  <verify>File exists with FadeIn component exported</verify>
  <done>FadeIn component created with IntersectionObserver-based scroll detection</done>
</task>

<task type="auto">
  <name>Task 3: Export component and import animations</name>
  <files>frontend/src/components/atoms/index.ts, frontend/src/app/globals.css</files>
  <action>
1. Update atoms/index.ts to export FadeIn:
   - Read existing file
   - Add: `export { FadeIn } from "./fade-in"`

2. Update globals.css to import linear-animations.css:
   - Read existing file (should already have linear-theme and linear-typography imports from Plan 01)
   - Add: `@import '../styles/linear-animations.css';`
   - Place near other Linear imports

Note: If Plan 01 hasn't run yet (parallel execution), add all three imports together.
  </action>
  <verify>
- grep "FadeIn" frontend/src/components/atoms/index.ts
- grep "linear-animations" frontend/src/app/globals.css
  </verify>
  <done>FadeIn exported from atoms, animations CSS imported in globals</done>
</task>

</tasks>

<verification>
1. CSS file has all keyframe definitions
2. FadeIn component compiles without TypeScript errors
3. Component is exported from atoms index
4. Animations CSS is imported in globals
</verification>

<success_criteria>
- linear-animations.css contains keyframes for fade-in, fade-in-up, fade-in-down, scale-in
- FadeIn component exists and is exported from @/atoms
- Reduced motion media query prevents animations for users who prefer
- No build errors when running `cd frontend && bun run dev`
</success_criteria>

<output>
After completion, create `.planning/phases/01-shared-components/01-02-SUMMARY.md`
</output>
